<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <title>Chat Webhook</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/preline/dist/preline.js"></script>
  <style>
    /* Splash Loading Bar */
    #splash {
      position: fixed;
      inset: 0;
      background: #111;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
    #loading-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 4px;
      background: red;
      animation: load 5s linear forwards;
    }
    @keyframes load {
      from { width: 0%; }
      to { width: 100%; }
    }
    /* Toast Container */
    #toast-container {
      position: fixed;
      top: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      z-index: 60;
    }
    .toast {
      transform: translateX(120%);
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }
    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }
  </style>
</head>
<body class="bg-gray-900 text-white">

  <!-- Splash -->
  <div id="splash">
    <div class="text-3xl font-bold mb-4">Loading...</div>
    <div id="loading-bar"></div>
  </div>

  <!-- Navbar -->
  <nav class="flex space-x-4 p-4 bg-gray-800">
    <button onclick="switchTab('webhooks')" class="px-4 py-2 bg-gray-700 rounded">Webhooks</button>
    <button onclick="switchTab('send')" class="px-4 py-2 bg-gray-700 rounded">Send Message</button>
  </nav>

  <!-- Pages -->
  <div id="pages" class="p-4">
    <div id="webhooks" class="page">
      <h1 class="text-xl font-bold mb-2">Manage Webhooks</h1>
      <form id="webhookForm" class="space-y-2">
        <input type="text" id="webhookUrl" placeholder="Enter Webhook URL"
          class="w-full p-2 rounded bg-gray-800 text-white" required>
        <button type="submit" class="px-4 py-2 bg-blue-600 rounded">Save Webhook</button>
      </form>
      <ul id="webhookList" class="mt-4 space-y-1"></ul>
    </div>

    <div id="send" class="page hidden">
      <h1 class="text-xl font-bold mb-2">Send Message</h1>
      <textarea id="messageInput" class="w-full p-2 rounded bg-gray-800 text-white"
        placeholder="Type your message..."></textarea>
      <button onclick="sendMessage()" class="mt-2 px-4 py-2 bg-green-600 rounded">Send</button>
    </div>
  </div>

  <!-- Toasts -->
  <div id="toast-container"></div>

<script>
  // Splash
  window.addEventListener("load", () => {
    setTimeout(() => {
      document.getElementById("splash").style.display = "none";
    }, 5000);
  });

  // Switch tabs
  function switchTab(tab) {
    document.querySelectorAll(".page").forEach(p => p.classList.add("hidden"));
    document.getElementById(tab).classList.remove("hidden");
  }

  // Webhook save
  document.getElementById("webhookForm").addEventListener("submit", e => {
    e.preventDefault();
    const url = document.getElementById("webhookUrl").value;
    if (url.trim() === "") return;
    let hooks = JSON.parse(localStorage.getItem("webhooks") || "[]");
    hooks.push(url);
    localStorage.setItem("webhooks", JSON.stringify(hooks));
    document.getElementById("webhookUrl").value = "";
    renderWebhooks();
    showToast("Webhook saved successfully!");
  });

  function renderWebhooks() {
    const hooks = JSON.parse(localStorage.getItem("webhooks") || "[]");
    const list = document.getElementById("webhookList");
    list.innerHTML = "";
    hooks.forEach((h, i) => {
      const li = document.createElement("li");
      li.textContent = h;
      li.className = "bg-gray-700 p-2 rounded";
      list.appendChild(li);
    });
  }

  renderWebhooks();

  // Send message
  function sendMessage() {
    const msg = document.getElementById("messageInput").value;
    if (msg.trim() === "") return showToast("Message cannot be empty");
    showToast("Message sent successfully!");
    document.getElementById("messageInput").value = "";
  }

  // Toast system
  function showToast(message) {
    const container = document.getElementById("toast-container");
    const toast = document.createElement("div");
    toast.className = "toast bg-gray-800 text-white px-4 py-2 rounded shadow flex items-center gap-2";
    toast.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M5 13l4 4L19 7" />
      </svg>
      <span>${message}</span>
    `;
    container.appendChild(toast);

    // animate in
    setTimeout(() => toast.classList.add("show"), 50);

    // auto remove
    setTimeout(() => {
      toast.classList.remove("show");
      setTimeout(() => toast.remove(), 400);
    }, 4000);
  }
</script>
</body>
</html>
