<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat Webhook</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #0f172a; color: #f1f5f9; }
    .hidden { display: none; }
    .loading-bar {
      height: 4px;
      background: red;
      width: 0%;
      transition: width 2s ease-in-out;
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 16px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
      transform: translateX(120%);
      transition: transform 0.5s ease, opacity 0.5s ease;
      opacity: 0;
    }
    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }
    .toast.success { background: #16a34a; color: white; }
    .toast.warning { background: #f59e0b; color: white; }
    .toast svg { width: 20px; height: 20px; }
  </style>
</head>
<body class="flex flex-col h-screen">

  <!-- Loading screen -->
  <div id="loading-screen" class="fixed inset-0 bg-[#0f172a] flex flex-col items-center justify-center z-50">
    <p class="mb-4 text-xl">Loading...</p>
    <div class="w-full h-1 bg-gray-700">
      <div id="loading-bar" class="loading-bar"></div>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="flex space-x-4 bg-gray-900 p-4 text-white">
    <button onclick="switchPage('dashboard')">Dashboard</button>
    <button onclick="switchPage('manager')">Webhook Manager</button>
    <button onclick="switchPage('send')">Send Message</button>
  </nav>

  <!-- Pages -->
  <main class="flex-1 p-6">
    <div id="dashboard" class="page">Welcome to <b>Chat Webhook</b>!</div>

    <div id="manager" class="page hidden">
      <h2 class="text-lg mb-2">Webhook Manager</h2>
      <div class="w-full h-1 bg-gray-700 mb-3">
        <div id="manager-bar" class="loading-bar"></div>
      </div>
      <form id="webhook-form" class="space-y-2">
        <input type="text" id="webhook-url" class="w-full p-2 rounded bg-gray-800 text-white" placeholder="Enter Webhook URL">
        <button type="submit" class="bg-blue-600 px-4 py-2 rounded">Save</button>
      </form>
      <ul id="webhook-list" class="mt-4 space-y-2"></ul>
    </div>

    <div id="send" class="page hidden">
      <h2 class="text-lg mb-2">Send Message</h2>
      <form id="message-form" class="space-y-2">
        <textarea id="message" class="w-full p-2 rounded bg-gray-800 text-white" placeholder="Type your message"></textarea>
        <button type="submit" class="bg-green-600 px-4 py-2 rounded">Send</button>
      </form>
    </div>
  </main>

  <!-- Toast Container -->
  <div id="toast-container"></div>

  <script>
    // Switch pages
    function switchPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
      document.getElementById(pageId).classList.remove('hidden');
    }

    // Toast system
    function showToast(type, message) {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        ${type === "success" 
          ? `<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>` 
          : `<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z"/></svg>`}
        <span>${message}</span>`;
      document.getElementById('toast-container').appendChild(toast);

      setTimeout(() => toast.classList.add("show"), 100);
      setTimeout(() => {
        toast.classList.remove("show");
        setTimeout(() => toast.remove(), 500);
      }, 4000);
    }

    // Webhook Manager
    const webhookForm = document.getElementById("webhook-form");
    const webhookList = document.getElementById("webhook-list");
    let webhooks = JSON.parse(localStorage.getItem("webhooks") || "[]");

    function renderWebhooks() {
      webhookList.innerHTML = "";
      webhooks.forEach((url, i) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-gray-800 p-2 rounded";
        li.innerHTML = `
          <span>${url}</span>
          <button onclick="removeWebhook(${i})" class="text-red-500">âœ•</button>`;
        webhookList.appendChild(li);
      });
    }

    function removeWebhook(i) {
      webhooks.splice(i, 1);
      localStorage.setItem("webhooks", JSON.stringify(webhooks));
      renderWebhooks();
      showToast("success", "Webhook removed");
    }

    webhookForm.addEventListener("submit", e => {
      e.preventDefault();
      const url = document.getElementById("webhook-url").value.trim();
      if (url) {
        webhooks.push(url);
        localStorage.setItem("webhooks", JSON.stringify(webhooks));
        renderWebhooks();
        showToast("success", "Webhook saved");
      }
    });

    // Send Message (just simulate popup)
    document.getElementById("message-form").addEventListener("submit", e => {
      e.preventDefault();
      const msg = document.getElementById("message").value.trim();
      if (msg) showToast("success", `Message Sent: ${msg}`);
    });

    // Simulate loading bar
    window.onload = () => {
      const bar = document.getElementById("loading-bar");
      bar.style.width = "100%";
      setTimeout(() => {
        document.getElementById("loading-screen").style.display = "none";
        showToast("warning", "Auth system is disabled");
        // Webhook manager loading
        const mbar = document.getElementById("manager-bar");
        setTimeout(() => mbar.style.width = "100%", 200);
        renderWebhooks();
      }, 2000);
    };
  </script>
</body>
</html>
